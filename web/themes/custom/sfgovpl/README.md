# SFGOV PL

## Introduction

This is the sfgov patternlab theme.

## Pattern library source files:

all the source files live in the folder:

`/web/libraries/sfgov-pattern-lab`

after doing your work create a tag and specify it in the `composer.json` file.

in that folder you'll be able to place your twig template files that are going to be part of the Pattern Library

## Requirements:

TODO: check versions of the following items:

- php-cli
- composer
- nodejs
- gulp

## Installation:

### Install Pattern Lab:

`$ cd pattern-lab`

`$ composer install`

### Install nodejs packages.

run `npm install` from the libraries/sfgov-pattern-lab folder.

run `npm install` from the root of the theme.

the `gulp` command is going to run browserSync and it's going to watch for changes in the patter library.

it is necessary php-cli to auto generate a new pattern library everytime a twig file or a SASS file changes.

### Compiled Pattern Library:

TODO: update the following.

`/themes/custom/sfgovpl/pattern-lab/public/index.html`

### Optional.

setup.sh to generate a symbolic link between the pattern library _patterns folder and the src folder.

## TODO:

  - Implement Javascript.
  - remove `src/fonts` and `dist/fonts` if they are going to be served via CDN or Google Fonts.
  - remove `fractal_components` once all the PL is migrated to Pattern Lab.
  - clean preprocess functions
  - move config.json to config folder
  - create config.local.json to override params if necessary.
  - ignore map files in .gitignore.

# This Drupal theme depends on:

This theme is designed to consume the css and js generated by the following repo.

https://github.com/SFDigitalServices/sfgov-pattern-lab

to install run:

`$ npm install`

`$ gulp initialize`

the `sfgovpl.libraries.yml` defines the library that references the css and js from this external pattern library.

- create a `$ gulp publish` which is going to install dependencies and copy template files to the drupal theme.


## TODO:
  - review and revise all of the above, because some of it will be irrelevant soon

## What is relevant and remains true:
  - this theme uses sass
  - this theme uses the gulp task runner (v4) to compile sass to css
  - there is no gulp task to concat and minify js

### Minimum node and npm versions
```
node: 10.3.0
npm: 6.1.0
```

### Compile sass and watch for changes
from this directory:
```
$ gulp
```
