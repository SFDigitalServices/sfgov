{% embed 'paragraph.html.twig' with { classes: ['sfgov-powerbi-embed'] } %}
  {% block content %}
    {{ attach_library("sfgovpl/sfgov-powerbi") }}

    {% for device, chart in charts %}
      <div data-powerbi data-device="{{ device }}" data-src="{{ chart.embed_url }}"
           style="display: none; position: relative; padding-top: calc({{ chart.padding_top }}% + 37px)">
        <iframe loading="lazy" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;"></iframe>
      </div>
    {% endfor %}

    {% if content.field_data_notes[0] %}
      {% include '@theme/form-details.twig' with {
        'summary': "Data notes"|t,
        'content': content.field_data_notes
      } %}
    {% else %}
      {{ content.field_source_data }}
    {% endif %}
  {% endblock %}
{% endembed %}
