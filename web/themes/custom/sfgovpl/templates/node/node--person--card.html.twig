{% extends 'node.html.twig' %}

{% block title %}
{% endblock title %}

{% if node.field_profile_photo|file_url %}
  {% set photo_url = file_url(node.field_profile_photo|file_url) %}
{% endif %}

{% if node.field_photo.entity.fileuri %}
  {% set photo_url = file_url(node.field_photo.entity.fileuri) %}
{% endif %}

{% block node %}
  {% block body %}
    {# at the moment bio summary is only for the mayor and only on the front page #}
    {% include '@theme/person-card.twig' with {
      "url": url,
      "first_name": node.field_first_name.value|default(''),
      "last_name": node.field_last_name.value|default(''),
      "position_title": node.field_title.value|default(''),
      "position_subtitle": node.field_sub_title.value|default(''),
      "bio_summary": (is_front and node.field_title.value|lower == 'mayor') ? node.body.summary|default('') : '',
      "photo": photo_url
    } %}
  {% endblock body %}
{% endblock node %}
