{% extends 'node.html.twig' %}

{% block node %}
  {% if is_front and content.field_image|render|striptags %}
    {% set thumbnail = file_url(node.field_image.entity.field_media_image.entity.uri.value|image_style('160x160')) %}
    {% set style = 'background-image: url(' ~ thumbnail ~ ');' %}
    {% set classes = classes|merge(['has-image']) %}
    {% set attributes = attributes.setAttribute('style', style) %}
  {% endif %}

  <a href="{{ url }}"{{ attributes.addClass(classes)|without('id', 'role') }}>
    {{ title_prefix }}
    <p{{title_attributes.addClass(title_classes)}}>{{ label }}</p>
    {{ title_suffix }}
    {{ content|without('links', 'field_image') }}
  </a>
{% endblock node %}
