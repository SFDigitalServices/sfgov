<?php

/**
 * @file
 * Contains sfgov_alerts.module.
 */

use Drupal\sfgov_alerts\Alert;

/**
 * Implements hook_theme().
 */
function sfgov_alerts_theme() {
  return [
    'sfgov_alerts' => [
      'render element' => 'content',
    ],
  ];
}

/**
 * @param $node
 *
 * Implements hook_node_presave().
 */
function sfgov_alerts_node_presave($node) {
  $type = $node->getType();

  if ($type == 'department') {
    $alert = new Alert($node);
    $alert->notify();
  }
}

/**
 * @param $entity Drupal\Core\Entity\Entity
 *
 * Implements hook_entity_presave().
 */
function sfgov_alerts_entity_presave($entity) {
  $bundle = $entity->bundle();

  if ($bundle == 'alert') {
    $alert = new Alert($entity);
    $alert->notify();
  }
}
